# Claude Code /review コマンド定義

------------------------------------------------------------------------

description: "ローカル差分専用レビュー（gh不要）"

------------------------------------------------------------------------

# 実行対象

- Gitのステージ済み差分のみをレビュー対象とする
- PRは使用しない
- ghコマンドは使用しない


# 前提

このリポジトリは **AI-first development** を採用している。

-   仕様は `docs/spec.md` が唯一の正
-   人間はコードを直接編集しない
-   フロントエンド完結
-   MVP優先
-   不要機能追加禁止

レビューは必ずこの前提に従う。

------------------------------------------------------------------------

# 🎯 レビュー目的（最優先）

最重要目的は：

> 実装が `docs/spec.md` に完全準拠しているかを確認すること

推測・改善提案・拡張提案は禁止。

------------------------------------------------------------------------

# 🔴 レビュー手順

1.  まず `docs/spec.md` を読む
2.  git diff --cached の差分をレビューする
3.  以下の観点でチェックする

------------------------------------------------------------------------

# 🔍 チェック観点

## 1. Spec逸脱チェック（最重要）

-   仕様にない機能を追加していないか
-   仕様にある機能を削除していないか
-   UI文言が仕様と一致しているか
-   受け入れ条件を満たしているか
-   独自解釈実装をしていないか

------------------------------------------------------------------------

## 2. AI-first原則違反

-   人間が直接修正すべき指示を出していないか
-   specを修正すべき箇所があるのにコード修正を提案していないか

※修正が必要な場合は 「spec.mdをこう変更すべき」と提案すること

------------------------------------------------------------------------

## 3. アーキテクチャ

-   フロントエンド完結か
-   API/DB/サーバー追加していないか
-   UIとロジックが分離されているか
    -   components に描画ロジックを書いていないか
    -   utils にReact依存コードを書いていないか

------------------------------------------------------------------------

## 4. TypeScript

-   any未使用
-   型アサーション乱用なし
-   型定義が types/ にある
-   Props型が明示されている

------------------------------------------------------------------------

## 5. React設計

-   不要なuseStateがない
-   派生値をstateにしていない
-   不要なuseEffectがない
-   無限ループの可能性なし

------------------------------------------------------------------------

## 6. Canvas/画像生成

-   画像サイズが仕様通り
-   テキスト位置が仕様通り
-   PNG保存が正常に動く設計か
-   Blob解放漏れなし

------------------------------------------------------------------------

## 7. MVP逸脱

以下を追加していないこと：

-   テーマ機能
-   履歴機能
-   保存形式追加
-   不要なUI装飾
-   設定画面
-   ダークモード

------------------------------------------------------------------------

# 📤 出力形式（必ず守る）

    # Spec逸脱
    - （あれば列挙）

    # AI-first違反
    - （あれば列挙）

    # アーキテクチャ問題
    - …

    # 型安全性
    - …

    # React設計
    - …

    # Canvas仕様整合性
    - …

    # MVP逸脱
    - …

    # 総評
    - spec準拠度: %
    - MVP純度: %
    - リリース可否: OK / 修正必要

------------------------------------------------------------------------

# 🚫 禁止事項

-   仕様外の改善提案
-   将来拡張の提案
-   過剰最適化の提案
-   主観的改善提案

------------------------------------------------------------------------

# ✅ 最終原則

このレビューは

> 「正しく作られているか」だけを判断する

賢くすることは目的ではない。 仕様通りに作られているかのみを評価せよ。
